<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Electronics Shopper - Compare</title>
	<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
	<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://cdn.jsdelivr.net/npm/lucide-static@0.321.0/font/lucide.css" rel="stylesheet">
	<style>
		@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap');

		body {
			font-family: 'Inter', sans-serif;
			background-color: #0f1115;
			color: #e2e8f0;
		}

		.mono { font-family: 'JetBrains Mono', monospace; }

		.pcb-card {
			background: #1a1d23;
			border: 1px solid #2d333d;
			border-radius: 12px;
			transition: all 0.2s ease-in-out;
			position: relative;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			justify-content: space-between;
		}

		.pcb-card:hover {
			border-color: #f97316;
			background: #1e2229;
			transform: translateY(-2px);
		}

		.active-card {
			border-color: #f97316;
			background: #1e2229;
			grid-column: 1 / -1;
		}

		.preview-container {
			height: 700px;
			background: white;
			border-radius: 12px;
			border: 1px solid #2d333d;
			margin-top: 1rem;
			overflow: hidden;
			animation: fadeIn 0.3s ease-out;
		}

		.compare-pane {
			height: calc(50vh - 60px);
			min-height: 400px;
			background: #1a1d23;
			border: 1px solid #2d333d;
			border-radius: 12px;
			overflow: hidden;
			display: flex;
			flex-direction: column;
		}

		.compare-pane iframe {
			width: 100%;
			height: 100%;
			background: white;
		}

		@keyframes fadeIn {
			from { opacity: 0; transform: translateY(10px); }
			to { opacity: 1; transform: translateY(0); }
		}

		select {
			appearance: none;
			background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
			background-repeat: no-repeat;
			background-position: right 0.75rem center;
			background-size: 1em;
		}

		/* Custom scrollbar */
		::-webkit-scrollbar {
			width: 8px;
		}
		::-webkit-scrollbar-track {
			background: #0f1115;
		}
		::-webkit-scrollbar-thumb {
			background: #2d333d;
			border-radius: 4px;
		}
		::-webkit-scrollbar-thumb:hover {
			background: #4b5563;
		}
	</style>
</head>
<body class="antialiased">
	<div id="root"></div>

	<script type="text/babel">
		const { useState } = React;

		const Icon = ({ name, size = 20, className = "" }) => (
			<i className={`lucide-${name} ${className}`} style={{ fontSize: size }}></i>
		);

		const DEFAULT_SITES = [
			{ id: '1', name: 'Ram E-Shop', urlPattern: 'https://www.ram-e-shop.com/website/search?search=', color: 'bg-orange-500' },
			{ id: '2', name: 'Makers Electronics', urlPattern: 'https://makerselectronics.com/?s=', suffix: '&post_type=product&type_aws=true', color: 'bg-blue-500' },
			{ id: '3', name: 'Free Electronic', urlPattern: 'https://free-electronic.com/?s=', suffix: '&product_cat=0&post_type=product', color: 'bg-emerald-500' },
			{ id: '4', name: 'Lampatronics', urlPattern: 'https://lampatronics.com/product?name=',suffix: '&post_type=product&dgwt_wcas=1',color: 'bg-yellow-500' },
			{ id: '5', name: 'UGE One', urlPattern: 'https://uge-one.com/?category_product=&s=', suffix: '&search_posttype=product', color: 'bg-lime-500' },
			{ id: '6', name: 'MicroOhm', urlPattern: 'https://microohm-eg.com/?s=', suffix: '&post_type=product&type_aws=true', color: 'bg-violet-500' },
			{ id: '7', name: 'Fut Electronics', urlPattern: 'https://store.fut-electronics.com/search?type=product&q=', color: 'bg-indigo-500' },
			{ id: '8', name: 'mecha-tronx', urlPattern: 'https://mecha-tronx.com/?product_cat=&s=', color: 'bg-slate-500' },
			{ id: '9', name: 'Op-Tronic', urlPattern: 'https://www.op-tronic.com/website/search?search=', suffix: '&order=name+asc', color: 'bg-slate-500' },
			{ id: '10', name: 'Most Electronic', urlPattern: 'https://mostelectronic.com/?s=', color: 'bg-sky-500' },
			{ id: '11', name: 'IN3D Shop', urlPattern: 'https://www.in3d-shop.com/search?q=', color: 'bg-pink-500' },
			{ id: '12', name: '3DSmart Shop', urlPattern: 'https://3dsmart-shop.com/?s=', color: 'bg-orange-600' },
			{ id: '13', name: 'Circuits Elec', urlPattern: 'https://circuits-elec.com/?s=', color: 'bg-teal-500' },
			{ id: '14', name: 'Raspberry Pi', urlPattern: 'https://www.raspberrypi.com/search/?q=', color: 'bg-rose-500' },
			{ id: '15', name: 'DIY Electronics', urlPattern: 'https://diyelectronicsegypt.com/?s=', color: 'bg-amber-500' },
			{ id: '16', name: 'Ampere Electronics', urlPattern: 'https://www.ampere-electronics.com/?s=', color: 'bg-orange-400' },
			{ id: '17', name: 'Electra store', urlPattern: 'https://electra.store/?s=', suffix: '&post_type=product&dgwt_wcas=1', color: 'bg-slate-500' },
			{ id: '18', name: 'Dev Boards', urlPattern: 'https://devboardsmarket.com/search?q=', color: 'bg-slate-500' },
			{ id: '19', name: 'CNC Egypt', urlPattern: 'https://cncegy.com/?s=', color: 'bg-red-500' }
		];

		function App() {
			const [query, setQuery] = useState('');
			const [sites] = useState(DEFAULT_SITES);
			const [view, setView] = useState('compare');
			const [activeSiteId, setActiveSiteId] = useState(null);
			const [compareSelection, setCompareSelection] = useState(['1', '2', '3', '4', '5', '6', '7', '8', '9']);

			const getFullUrl = (siteId, searchTerm) => {
				const site = sites.find(s => s.id === siteId);
				if (!site || !searchTerm) return '';
				// Ensure searchTerm is clean and appended correctly
				return `${site.urlPattern}${encodeURIComponent(searchTerm)}${site.suffix || ''}`;
			};

			const handleCompareChange = (index, value) => {
				const newSelection = [...compareSelection];
				newSelection[index] = value;
				setCompareSelection(newSelection);
			};

			return (
				<div className="min-h-screen flex flex-col">
					<header className="bg-[#1a1d23] border-b border-[#2d333d] sticky top-0 z-30 px-6 py-4">
						<div className="max-w-[1800px] mx-auto flex flex-col md:flex-row items-center gap-6">
							<div className="flex items-center gap-3 shrink-0">
								<div className="bg-orange-500 p-2 rounded-lg shadow-lg">
									<Icon name="search" size={20} className="text-white" />
								</div>
								<h1 className="text-lg font-bold tracking-tight text-white uppercase italic">
									Electronics<span className="text-orange-500">Hub</span>
								</h1>
							</div>

							<div className="flex-grow relative w-full">
								<input
									type="text"
									placeholder="Search for parts, boards, sensors..."
									className="w-full bg-[#0f1115] pl-12 pr-4 py-3 rounded-xl border border-[#2d333d] focus:border-orange-500 focus:ring-1 focus:ring-orange-500 outline-none text-white transition-all shadow-inner"
									value={query}
									onChange={(e) => setQuery(e.target.value)}
								/>
								<div className="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500">
									<Icon name="cpu" size={18} />
								</div>
							</div>

							<div className="flex bg-[#0f1115] p-1 rounded-lg border border-[#2d333d]">
								<button
									onClick={() => setView('grid')}
									className={`px-4 py-2 rounded-md text-xs font-semibold uppercase tracking-wider transition-all flex items-center gap-2 ${view === 'grid' ? 'bg-orange-500 text-white shadow-md' : 'text-gray-400 hover:text-white'}`}
								>
									<Icon name="layout-grid" size={14} /> Grid
								</button>
								<button
									onClick={() => setView('compare')}
									className={`px-4 py-2 rounded-md text-xs font-semibold uppercase tracking-wider transition-all flex items-center gap-2 ${view === 'compare' ? 'bg-orange-500 text-white shadow-md' : 'text-gray-400 hover:text-white'}`}
								>
									<Icon name="columns-4" size={14} /> Compare
								</button>
							</div>
						</div>
					</header>

					<main className="flex-grow p-6">
						{query ? (
							view === 'grid' ? (
								<div className="max-w-[1800px] mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-3">
									{sites.map((site) => (
										<React.Fragment key={site.id}>
											<div
												onClick={() => setActiveSiteId(activeSiteId === site.id ? null : site.id)}
												className={`pcb-card p-4 cursor-pointer group ${activeSiteId === site.id ? 'active-card' : ''}`}
											>
												<div className="flex flex-col h-full">
													<div className="flex items-center justify-between mb-4">
														<div className={`w-10 h-10 rounded-lg flex items-center justify-center shadow-lg ${site.color}`}>
															<Icon name="store" size={20} className="text-white" />
														</div>
														<a
															href={getFullUrl(site.id, query)}
															target="_blank"
															rel="noopener noreferrer"
															onClick={(e) => e.stopPropagation()}
															className="w-16 h-7 flex items-center justify-center rounded-md bg-[#0f1115] hover:bg-orange-500 text-[#94a3b8] hover:text-white border border-[#2d333d] hover:border-orange-500 transition-all text-[9px] font-bold uppercase tracking-widest"
														>
															Visit
														</a>
													</div>

													<h3 className="text-white font-bold text-sm tracking-wide truncate mb-1">{site.name}</h3>

													<div className="mt-auto pt-6 flex justify-between items-center text-[9px] font-bold text-gray-500 uppercase tracking-widest px-1">
														<span>Preview</span>
														<span className="group-hover:text-orange-500 transition-colors flex items-center gap-1">
															View <Icon name="chevron-down" size={10} />
														</span>
													</div>
												</div>
											</div>
											{activeSiteId === site.id && (
												<div className="col-span-full preview-container shadow-2xl">
													<div className="bg-[#1a1d23] px-4 py-3 border-b border-[#2d333d] flex justify-between items-center">
														<div className="flex items-center gap-2">
															<div className={`w-2 h-2 rounded-full ${site.color}`}></div>
															<span className="text-xs font-bold text-gray-300 uppercase tracking-tighter">{site.name}</span>
														</div>
														<div className="flex items-center gap-3">
															<a
																href={getFullUrl(site.id, query)}
																target="_blank"
																rel="noopener noreferrer"
																className="text-[10px] font-bold uppercase text-orange-500 hover:underline flex items-center gap-1"
															>
																Visit Website <Icon name="external-link" size={12} />
															</a>
															<button
																onClick={() => setActiveSiteId(null)}
																className="text-gray-500 hover:text-white transition-colors"
															>
																<Icon name="x" size={18}/>
															</button>
														</div>
													</div>
													<iframe src={getFullUrl(site.id, query)} className="w-full h-full" />
												</div>
											)}
										</React.Fragment>
									))}
								</div>
							) : (
								<div className="h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-[1800px] mx-auto">
									{compareSelection.map((selectedId, idx) => (
										<div key={idx} className="compare-pane shadow-xl">
											<div className="bg-[#1a1d23] px-4 py-2 flex items-center justify-between gap-4 border-b border-[#2d333d]">
												<div className="flex items-center gap-2 flex-grow overflow-hidden">
													<span className="shrink-0 text-[9px] font-bold text-orange-500 mono bg-orange-500/10 px-1.5 py-0.5 rounded">P{idx + 1}</span>
													<select
														value={selectedId}
														onChange={(e) => handleCompareChange(idx, e.target.value)}
														className="bg-transparent text-gray-200 text-[11px] font-bold uppercase tracking-wide py-1 rounded-lg outline-none flex-grow focus:text-orange-500"
													>
														{sites.map(s => (
															<option key={s.id} value={s.id} className="bg-[#1a1d23]">{s.name}</option>
														))}
													</select>
												</div>
												<a
													href={getFullUrl(selectedId, query)}
													target="_blank"
													className="w-6 h-6 flex items-center justify-center rounded-md bg-[#0f1115] text-gray-500 hover:text-orange-500 border border-[#2d333d] transition-colors"
												>
													<Icon name="external-link" size={12} />
												</a>
											</div>
											<div className="flex-grow bg-white relative">
												<iframe src={getFullUrl(selectedId, query)} title={`pane-${idx}`} />
											</div>
										</div>
									))}
								</div>
							)
						) : (
							<div className="h-full flex flex-col items-center justify-center py-40">
								<div className="relative mb-6">
									<div className="absolute inset-0 bg-orange-500 blur-3xl opacity-10 rounded-full"></div>
									<Icon name="search" size={64} className="text-[#2d333d] relative z-10" />
								</div>
								<h2 className="text-lg font-bold text-[#2d333d] uppercase tracking-[0.2em]">Awaiting Search Input</h2>
								<p className="text-gray-600 mt-2 text-sm italic">Compare prices across multiple Egypt electronics providers</p>
							</div>
						)}
					</main>

					<footer className="py-6 px-8 border-t border-[#2d333d] bg-[#0f1115]">
						<div className="max-w-[1800px] mx-auto flex flex-col sm:flex-row justify-between items-center gap-4">
							<div className="flex items-center gap-4 text-[10px] font-bold text-gray-600 uppercase tracking-widest">
								<span>Status: Operational</span>
								<span className="text-[#2d333d]">|</span>
								<span>Version 4.5.0</span>
							</div>
							<div className="text-[10px] font-bold text-gray-600 uppercase tracking-widest bg-[#1a1d23] px-4 py-2 rounded-full border border-[#2d333d]">
								{view === 'grid' ? 'High-Density Grid Explorer' : 'Multi-Quadrant Comparison'}
							</div>
						</div>
					</footer>
				</div>
			);
		}

		const root = ReactDOM.createRoot(document.getElementById('root'));
		root.render(<App />);
	</script>
</body>
</html>